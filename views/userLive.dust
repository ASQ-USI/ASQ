<!DOCTYPE html>
<html lang="en">
  <head>
    {>htmlHead/}
    <title>ASQ - {user}\s live presentations</title>
  </head>

  <body>

    <!---   top menu -->
    {>menu/}

    <!---   Content area   -->
    <div class="container" id="mainContainer">

      <!--- Alert -->
      <!-- Show notification fo user feedback based on query alert and type-->

      {?alert}
      <div class="alert {type}">
        {alert}
      </div>
      {/alert}
      
        {^livePresentations}
          <div class="row">
            <div class="span12  headline">
              <h2 class="pull-left"><a href="/{username}">{user.name}</a> doesn't seem to have any live presentations.</h2>
            </div>
          </div>
        {:else}
          <div class="row accordion">
            <div class="span12 accordion-group">
              <div class="row accordion-heading">
                <div class="span12  headline">
                  <h2 class="pull-left"><a href="/{username}">{user.name}'s</a> live presentations</h2>
                  <a class="pull-right accordion-toggle" data-toggle="collapse" data-target="#course-{idx}" href="#">show/hide</a>
                </div>
              </div>
              <div class="row accordion-body collpase in" id="course-{idx}">
                <div class="span12 accordion-inner">
                  {#livePresentations username=username}
                  <div class="thumbContainer">
                    <div class="thumb" id="{_id}">
                      <div class="info" >
                        <div class="bg" style="background-image: url('/slides/thumbs/{_id}/0-thumb.png')"> </div>
                        <h4>{title}</h4>
                      </div>
                      <div class="buttons-container">
                        <div class="buttons">
                          <a href="{liveUrl}" class="btn btn-primary"><i class="icon-picture icon-white"> </i> Join presentation</a>
                        </div>
                      </div>

                    </div>
                  </div>
                  {/livePresentations}
                </div>
              </div>
            </div>
<!--             <div class="span12"> -->
          </div>
        {/livePresentations}

    </div>
    <div id="iOSWebAppInfo" data-content='Tab on &nbsp;<img width="20px" src="/img/iOS-action.png"/>&nbsp; and select<br/> "Add to Home Screen".'></div>
    <!-- /container -->

    <!-- Le javascript -->
    <!-- Connect to sockets only if there's an active session -->
    {?session}

      <!-- Socket parameters that are needed by our javascript -->
      {>serverParams/}
      <script>
        /* if the + sign looks strange to you have a look here:
         http://stackoverflow.com/questions/13341698/javascript-plus-sign-in-front-of-function-name */

        +function initSocket(){
          var clientSocket = require('clientSocket').init();
        }();        
      </script>
    {/session}
    <script>
      +function initDomBindings(){
         require('dom').bindingsFor('userLive');
      }();                
    </script>
  </body>
</html>